{% load static %}
<div class="row mt-3">
    <div class="col-md-4">
        <div class="card">
          <div class="card-header">
            <strong>Introduction</strong>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">From <strong>{{ user.permDistrict }}, {{ user.permCity }}</strong></li>
            <li class="list-group-item">Lives in <strong>{{ user.tempDistrict }}, {{ user.tempCity }}</strong></li>
            <li class="list-group-item">Blood Group <strong>{{ user.bloodGroup }}</strong></li>
            <li class="list-group-item">Following <strong> {{ user.following_count }} People </strong></li>
            <li class="list-group-item">Member Since <strong>{{ user.user.date_joined }}</strong></li>
            <li class="list-group-item m-auto"><a href="{% url 'profile_app:about' user.user.username %}">See More About {{ user.user.first_name }}</a></li>
          </ul>
        </div>
        <div class="card mt-3">
          <div class="card-header">
            <strong>Photos</strong>
          </div>
          <div class="card-body m-0 p-0">
             <img src="{{ user.profile_pic }}" width="100%" height="500rem">
          </div>
        </div>
    </div>
    <div class="col-md-8">
      {% if request.user.username == user.user.username %}
        <div class="card">
          <div class="card-header">
            Share Story
          </div>
          <div class="card-body">
              <form action="{% url 'profile_app:createPost' user.user.username %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                  <div class="form-group">
                      <textarea rows="2" cols="50" placeholder="Add story here..." autofocus name="caption" style="border: none; width: 100%; resize: none;"></textarea>
                    
                    <div class="d-flex">   
                    <img id="blah" src="#" alt="your image" style="display: none;" />
                      <video id="video" height="200" width="200" controls  style="display: none;">
                          <source src="" id="video_here" >
                            Your browser does not support HTML5 video.
                      </video>
                    </div>
                      <div class="d-flex justify-content-between">
                      <div class="file-input-wrapper">
                          <button class="btn-file-input">Photo</button>
                          <input type="file" name="postPhoto" accept="image/*" multiple/>
                          
                        </div>
                        <div class="file-input-wrapper">
                          <button class="btn-file-input">Video</button>
                          <input type="file" name="file[]" class="file_multi_video" accept="video/*"/>
                        </div>
                    </div>
                      <select class="form-control mt-2" id="exampleFormControlSelect1" name="post_audience">
                          <option value="public">Public</option>
                          <option value="followers">Only Follower</option>
                          <option value="private">Only Me</option>
                        </select>
                    <button class="btn btn-primary btn-block mt-2" type="submit">Post</button>
                  </div>
            </form>                                    
          </div>
        </div>

        {% for post in my_profile_posts %}
        <div class="mt-3">
            <div class="card">
              <div class="card-body">
                <div class="d-flex align-items-center">
                    <img src="{{ post.author.profile_pic }}" height="50" width="50" alt="Profile Picture" style="border-radius: 50%;">
                    <div class="ml-2">
                      {% if post.post_type == 'profile_picture' %}
                        <p><strong class="card-title mb-0">{{ post.author.user.first_name }} {{ post.author.user.last_name }}</strong> has updated profile Picture</p>
                      {% elif post.post_type == 'post' %}
                        <p><strong class="card-title mb-0">{{ post.author.user.first_name }} {{ post.author.user.last_name }}</strong> has created a post </p>
                      {% endif %}
                        <p class="card-text mt-0"><small class="text-muted">{{ post.created }}</small></p>
                    </div>
                    <div class="menu-icon ml-auto mr-3  dropleft">
                        <span class="fa fa-ellipsis-v" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></span>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" href="#">Edit Post</a>
                            <a class="dropdown-item" href="#">Delete Post</a>
                            <a class="dropdown-item" href="#">Make Private</a>
                            <a class="dropdown-item" href="#">Make Public</a>
                          </div>
                    </div>
                </div>
                <p class="card-text mt-2">{{ post.caption }}</p>
              </div>
              {% for post_image in post.post_image %}
                <img class="card-img-bottom" src="{{ post_image.image }}">                  
              {% endfor %}       
              
            </div>
        </div>    
        {% endfor %}

        {% else %} 
        {% for post in user_profile_posts %}
          <div class="mt-3">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex align-items-center">
                      <img src="{{ post.author.profile_pic }}" height="50" width="50" alt="Profile Picture" style="border-radius: 50%;">
                      <div class="ml-2">
                        {% if post.post_type == 'profile_picture' %}
                          <p><strong class="card-title mb-0">{{ post.author.user.first_name }} {{ post.author.user.last_name }}</strong> has updated profile Picture</p>
                        {% elif post.post_type == 'post' %}
                          <p><strong class="card-title mb-0">{{ post.author.user.first_name }} {{ post.author.user.last_name }}</strong> has created a post </p>
                        {% endif %}
                          <p class="card-text mt-0"><small class="text-muted">{{ post.created }}</small></p>
                      </div>
                      <div class="menu-icon ml-auto mr-3  dropleft">
                          <span class="fa fa-ellipsis-v" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></span>
                          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                              <a class="dropdown-item" href="#">Edit Post</a>
                              <a class="dropdown-item" href="#">Delete Post</a>
                              <a class="dropdown-item" href="#">Make Private</a>
                              <a class="dropdown-item" href="#">Make Public</a>
                            </div>
                      </div>
                  </div>
                  <p class="card-text mt-2">{{ post.caption }}</p>
                </div>
                {% for post_image in post.post_image %}
                  <img class="card-img-bottom" src="{{ post_image.image }}">                  
                {% endfor %}       
                
              </div>
          </div>    
        {% endfor %}          
        {% endif %}
          
    </div>
</div>